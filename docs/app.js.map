)]}'
{"version":3,"sources":["meteor://ðŸ’»app/imports/ui/body.js","meteor://ðŸ’»app/client/main.js"],"names":["_slicedToArray","module","link","default","v","_regeneratorRuntime","Meteor","Template","Signer","ProviderSeed","calculateTimeout","tmpl","getHeight","height","currentHeight","set","intervalCounter","Date","now","minutesLeft","timeout","runCallback","console","log","setTimeout","invokeScriptOptions","dApp","call","args","fee","tataInvokeScriptOptions","checkIfSendVestingRequest","alreadySent","Promise","all","signer","invoke","broadcast","tx","tx2","id","requestOptions","method","redirect","fetch","then","response","json","body","onCreated","bodyOnCreated","address","ReactiveVar","intervalId","counterStarted","autorun","c","get","helpers","instance","vestingInBlocks","vestingInDate","minutes","toLocaleTimeString","txUrl","tx2Url","runningCounter","events","e","preventDefault","seed","find","value","trim","setProvider","login","publicKey","getBalance","balances","setInterval","clearInterval"],"mappings":"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","file":"/app.js","sourcesContent":["import { Meteor } from 'meteor/meteor';\nimport { Template } from 'meteor/templating';\nimport { Signer } from '@waves/signer';\n// import { ProviderCloud } from '@waves.exchange/provider-cloud';\nimport { ProviderSeed } from '@waves/provider-seed';\nimport './body.html';\n\nasync function calculateTimeout(tmpl) {\n    const height = await getHeight();\n    tmpl.currentHeight.set(height);\n    tmpl.intervalCounter.set(Date.now()); //it triggers tracker.autorun rerun\n    const minutesLeft = 1440 - height % 1440;\n    const timeout = minutesLeft < 2 ? 5*1000 :\n        minutesLeft < 10 ? 20*1000 :\n            minutesLeft < 60 ? 60*1000 :\n                minutesLeft < 1000 ? 5*60*1000 : 10*60*1000;\n    return {timeout, minutesLeft};\n    // return Promise.resolve((Math.random()*10 + 1)*1000);\n}\nasync function runCallback(tmpl, calculateTimeout) {\n    const {timeout, minutesLeft} = await calculateTimeout(tmpl)\n\n    // const {address, publicKey} = await tmpl.signer.login();\n    // const balances = await tmpl.signer.getBalance();\n    console.log('%c timeout: ', 'background: #222; color: #dabacc', timeout, new Date());\n\n    Meteor.setTimeout( ()=>{runCallback(tmpl, calculateTimeout)}, timeout);\n}\n\nconst invokeScriptOptions = {\n    dApp: '3PQL8GcwJYxECX99eRVYYPvixMwHPcxsGsw',\n    call: {\n        function: 'withdrawVestedAllUSDN',\n        args: []\n    },\n    fee: 0.1881*10**8\n}\nconst tataInvokeScriptOptions = {\n    dApp: '3P2aJo7YfFPJXZqEyt8djXpKZVW8gVfUcg5',\n    call: {\n        function: 'withdrawVestedAllUSDN',\n        args: []\n    },\n    fee: 0.1891*10**8\n}\n\nasync function checkIfSendVestingRequest(tmpl, height) {\n    const minutesLeft = 1440 - height % 1440;\n    if (minutesLeft >= 1439 && height !== 0) { // removed !tmpl.alreadySent to allow next day vesting\n        console.log('%c RUN: ', 'background: #222; color: #bada55', 'checkIfSendVestingRequest');\n        tmpl.alreadySent = true;\n        const [tx, tx2] = await Promise.all([\n            tmpl.signer.invoke(invokeScriptOptions).broadcast(),\n            tmpl.signer.invoke(tataInvokeScriptOptions).broadcast()\n        ]);\n        console.log('%c MATIdebug: ', 'background: #222; color: #bada55', tx);\n        console.log('%c MATIdebug: ', 'background: #222; color: #bada55', tx2);\n\n        tmpl.tx.set(tx[0].id);\n        tmpl.tx2.set(tx2[0].id);\n        // const tx = await tmpl.signer\n        //     .invoke(invokeScriptOptions)\n        //     .broadcast();\n        // const tx2 = await tmpl.signer\n        //     .invoke(tataInvokeScriptOptions)\n        //     .broadcast();\n    }\n}\n\nasync function getHeight() {\n    const requestOptions = {\n        method: 'GET',\n        redirect: 'follow'\n    };\n    return await fetch(\"https://nodes.wavesnodes.com/activation/status\", requestOptions)\n        .then(response => response.json())\n        .then(response => response.height);\n}\n\nTemplate.body.onCreated(function bodyOnCreated() {\n    this.address = new ReactiveVar(null)\n    this.currentHeight = new ReactiveVar(null);\n    this.tx = new ReactiveVar(null);\n    this.tx2 = new ReactiveVar(null);\n    this.intervalCounter = new ReactiveVar(0);\n    this.alreadySent = false;\n    this.signer = new Signer();\n\n    this.intervalId = 0;\n    this.counterStarted = false;\n\n    this.autorun(async c=> {\n        const height = this.currentHeight.get() || 0;\n        await checkIfSendVestingRequest(this, height);\n    });\n\n    runCallback(this, calculateTimeout);\n});\n\nTemplate.body.helpers({\n    address() {\n        const tmpl = Template.instance();\n        return tmpl.address.get();\n    },\n    currentHeight() {\n        const tmpl = Template.instance();\n        return tmpl.currentHeight.get();\n    },\n    vestingInBlocks() {\n        const tmpl = Template.instance();\n        const height = tmpl.currentHeight.get() || 0;\n        if (!height) {\n            return null;\n        }\n        return 1440 - height % 1440;\n    },\n    vestingInDate() {\n        const tmpl = Template.instance();\n        const height = tmpl.currentHeight.get() || 0;\n        if (!height) {\n            return null;\n        }\n        const minutes = 1440 - height % 1440;\n        return (new Date(Date.now() + minutes*60000)).toLocaleTimeString()\n    },\n    tx() {\n        const tmpl = Template.instance();\n        return tmpl.tx.get();\n    },\n    txUrl() {\n        const tmpl = Template.instance();\n        return `https://wavesexplorer.com/transactions/${tmpl.tx.get()}`;\n    },\n    tx2() {\n        const tmpl = Template.instance();\n        return tmpl.tx2.get();\n    },\n    tx2Url() {\n        const tmpl = Template.instance();\n        return `https://wavesexplorer.com/transactions/${tmpl.tx2.get()}`;\n    },\n    runningCounter() {\n        const tmpl = Template.instance();\n        return tmpl.intervalCounter.get();\n    }\n});\n\nTemplate.body.events({\n    'click [data-action=login]': async function (e, tmpl) {\n        e.preventDefault();\n        const seed = tmpl.find('#seed').value.trim();\n        tmpl.signer.setProvider(new ProviderSeed(seed));\n        const {address, publicKey} = await tmpl.signer.login();\n        tmpl.address.set(address);\n        const balances = await tmpl.signer.getBalance();\n        console.log('%c MATIdebug: ', 'background: #222; color: #bada55', balances);\n    },\n    'click [data-action=start-counter]': async function (e, tmpl) {\n        e.preventDefault();\n        if (tmpl.counterStarted) return false;\n        tmpl.counterStarted = true;\n        console.log('%c MATIdebug: ', 'background: #222; color: #bada55', 'hehe');\n        // const height = await getHeight();\n        // tmpl.currentHeight.set(height);\n        // tmpl.intervalCounter.set(Date.now()); //it triggers tracker.autorun rerun\n\n        // await runCallback(tmpl)\n        tmpl.intervalId = Meteor.setInterval(async ()=> {\n            const height = await getHeight();\n            tmpl.currentHeight.set(height);\n            tmpl.intervalCounter.set(Date.now()); //it triggers tracker.autorun rerun\n            console.log('%c MATIdebug: ', 'background: #222; color: #bada55', 'bum');\n        }, 5*1000);\n    },\n    'click [data-action=stop-counter]': function (e, tmpl) {\n        e.preventDefault();\n        Meteor.clearInterval(tmpl.intervalId);\n        tmpl.counterStarted = false;\n        tmpl.intervalCounter.set(0);\n    },\n    'click [data-action=\"run-script\"]': async function (e, tmpl) {\n        e.preventDefault();\n        console.log('%c MATIdebug: ', 'background: #222; color: #bada55', 'invoking script :)');\n        const tx = await tmpl.signer\n            .invoke({\n                dApp: '3PQL8GcwJYxECX99eRVYYPvixMwHPcxsGsw',\n                call: {\n                    function: 'withdrawVestedAllUSDN',\n                    args: []\n                },\n                fee: 0.191*10**8\n            })\n            .broadcast();\n        console.log('%c MATIdebug: ', 'background: #222; color: #bada55', tx);\n    }\n});","import '../imports/ui/body.js';"]}